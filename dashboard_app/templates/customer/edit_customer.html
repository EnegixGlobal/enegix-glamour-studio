{% extends "base2.html" %}
{% load static %}
{% block content %}

<div class="ribbon-header d-flex justify-content-between align-items-center px-4 pb-5 mb-3" style="color: black">
  <div class="d-flex align-items-center">
    <i class="fas fa-user-edit me-3 fs-2" style="color: #ff4f6e;"></i>
    <div class="fw-bold fs-3">Edit Customer - {{ customer.customer_id }}</div>
  </div>
  <div class="breadcrumb-text text-end">
    <span class="text-black"><i class="fas fa-home me-1"></i>HOME</span>
    <span class="mx-2 text-black">/</span>
    <a href="{% url 'customer_list' %}" class="text-black">Customers</a>
    <span class="mx-2 text-black">/</span>
    <span class="text-black-50">Edit</span>
  </div>
</div>

<div class="container-fluid mt-2">
  <form method="POST" enctype="multipart/form-data">
    {% csrf_token %}
    
    <!-- Basic Information Card -->
    <div class="card shadow-lg mb-4 modern-card">
      <div class="card-header table-title-bar fw-bold text-white">
        <i class="fas fa-user me-2"></i>Basic Information
      </div>
      <div class="card-body p-4">
        <div class="row">
          <div class="col-md-4 mb-3">
            <label class="form-label"><i class="fas fa-user me-2 text-primary"></i>Full Name <span class="text-danger">*</span></label>
            <input type="text" name="full_name" class="form-control modern-input" value="{{ customer.full_name }}" required />
          </div>
          
          <div class="col-md-4 mb-3">
            <label class="form-label"><i class="fas fa-mobile-alt me-2 text-primary"></i>Mobile Number <span class="text-danger">*</span></label>
            <input type="tel" name="mobile" class="form-control modern-input" value="{{ customer.mobile }}" maxlength="10" pattern="[0-9]{10}" required />
          </div>
          
          <div class="col-md-4 mb-3">
            <label class="form-label"><i class="fas fa-envelope me-2 text-primary"></i>Email</label>
            <input type="email" name="email" class="form-control modern-input" value="{{ customer.email|default:'' }}" />
          </div>
        </div>

        <div class="row">
          <div class="col-md-4 mb-3">
            <label class="form-label"><i class="fas fa-venus-mars me-2 text-primary"></i>Gender</label>
            <select name="gender" class="form-control modern-input">
              <option value="">Select Gender</option>
              <option value="male" {% if customer.gender == 'male' %}selected{% endif %}>Male</option>
              <option value="female" {% if customer.gender == 'female' %}selected{% endif %}>Female</option>
              <option value="other" {% if customer.gender == 'other' %}selected{% endif %}>Other</option>
            </select>
          </div>
          
          <div class="col-md-4 mb-3">
            <label class="form-label"><i class="fas fa-calendar-alt me-2 text-primary"></i>Date of Birth</label>
            <input type="date" name="dob" class="form-control modern-input" value="{{ customer.dob|date:'Y-m-d' }}" />
          </div>
          
          <div class="col-md-4 mb-3">
            <label class="form-label"><i class="fas fa-image me-2 text-primary"></i>Profile Picture</label>
            <input type="file" name="profile_pic" class="form-control modern-input" accept="image/*" />
            {% if customer.profile_pic %}
              <small class="text-muted">Current: {{ customer.profile_pic.name|truncatewords:3 }}</small>
            {% endif %}
          </div>
        </div>

        <!-- Current Profile Picture Preview -->
        {% if customer.profile_pic %}
        <div class="row">
          <div class="col-md-12 mb-3">
            <label class="form-label">Current Profile Picture:</label>
            <div>
              <img src="{{ customer.profile_pic.url }}" class="profile-preview" alt="{{ customer.full_name }}">
            </div>
          </div>
        </div>
        {% endif %}
      </div>
    </div>

    <!-- Address Details Card -->
    <div class="card shadow-lg mb-4 modern-card">
      <div class="card-header table-title-bar fw-bold text-white">
        <i class="fas fa-map-marker-alt me-2"></i>Address Details
      </div>
      <div class="card-body p-4">
        <div class="row">
          <div class="col-md-12 mb-3">
            <label class="form-label"><i class="fas fa-home me-2 text-primary"></i>Address Line</label>
            <textarea name="address_line" class="form-control modern-input" rows="3">{{ customer.address_line }}</textarea>
          </div>
        </div>

        <div class="row">
          <div class="col-md-4 mb-3">
            <label class="form-label"><i class="fas fa-city me-2 text-primary"></i>City</label>
            <input type="text" name="city" class="form-control modern-input" value="{{ customer.city }}" />
          </div>
          
          <div class="col-md-4 mb-3">
            <label class="form-label"><i class="fas fa-flag me-2 text-primary"></i>State</label>
            <input type="text" name="state" class="form-control modern-input" value="{{ customer.state }}" />
          </div>
          
          <div class="col-md-4 mb-3">
            <label class="form-label"><i class="fas fa-mail-bulk me-2 text-primary"></i>Pincode</label>
            <input type="text" name="pincode" class="form-control modern-input" value="{{ customer.pincode }}" maxlength="6" pattern="[0-9]{6}" />
          </div>
        </div>
      </div>
    </div>

    <!-- Action Buttons -->
    <div class="card shadow-lg mb-4 modern-card">
      <div class="card-body p-4">
        <div class="d-flex justify-content-between">
          <a href="{% url 'customer_list' %}" class="btn btn-secondary btn-action-lg">
            <i class="fas fa-arrow-left me-2"></i>Back to List
          </a>
          <button type="submit" class="btn btn-primary btn-action-lg">
            <i class="fas fa-save me-2"></i>Update Customer
          </button>
        </div>
      </div>
    </div>

  </form>
</div>

<style>
/* Modern Card Styles */
.modern-card {
  border-radius: 15px;
  border: none;
  overflow: hidden;
}

.modern-input {
  border: 2px solid #e0e0e0 !important;
  border-radius: 10px;
  padding: 12px 15px;
  transition: all 0.3s ease;
  color: #000;
}

.modern-input:focus {
  border-color: #ff4f6e !important;
  background-color: #fff5f7 !important;
  box-shadow: 0 0 0 0.2rem rgba(255, 79, 110, 0.15);
  transform: translateY(-2px);
}

.form-label {
  font-weight: 600;
  color: #333;
  margin-bottom: 8px;
}

.card-header.table-title-bar {
  background: linear-gradient(135deg, #ff4f6e 0%, #ff80ab 100%);
  padding: 20px;
  font-size: 18px;
  border-bottom: 3px solid rgba(255,255,255,0.2);
}

.btn-action-lg {
  padding: 12px 30px;
  border-radius: 10px;
  font-weight: 600;
  transition: all 0.3s ease;
}

.btn-action-lg:hover {
  transform: translateY(-2px);
  box-shadow: 0 5px 15px rgba(0,0,0,0.2);
}

.btn-primary {
  background: linear-gradient(135deg, #ff4f6e 0%, #ff80ab 100%);
  border: none;
}

.btn-primary:hover {
  background: linear-gradient(135deg, #e63956 0%, #ff6b9d 100%);
}

.ribbon-header {
  background: linear-gradient(135deg, #fff5f7 0%, #ffe9ed 100%);
  border-radius: 15px;
  padding: 20px;
  margin-bottom: 20px;
  box-shadow: 0 2px 10px rgba(255, 79, 110, 0.05);
}

.text-primary {
  color: #ff4f6e !important;
}

label .text-danger {
  font-weight: normal;
}

.profile-preview {
  width: 150px;
  height: 150px;
  border-radius: 50%;
  object-fit: cover;
  border: 3px solid #ff4f6e;
  box-shadow: 0 4px 15px rgba(255, 79, 110, 0.3);
}
</style>

{% endblock %}
